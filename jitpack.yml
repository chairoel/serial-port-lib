jdk:
  - openjdk17

before_install:
  # Set SDK path & tambahkan sdkmanager ke PATH
  - export ANDROID_HOME=/opt/android-sdk-linux
  - export PATH=$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/tools/bin:$PATH

  # Terima semua lisensi
  - yes | sdkmanager --licenses

  # Pasang komponen yang dibutuhkan build-mu
  - sdkmanager "platforms;android-36" "build-tools;34.0.0" "cmake;3.22.1" "ndk;28.0.12433566"

install:
  # Build hanya modul library & publish ke mavenLocal JitPack
  - ./gradlew -Pgroup=com.github.chairoel -Pversion=$VERSION \
    :serial-port:clean :serial-port:assembleRelease \
    :serial-port:publishReleasePublicationToMavenLocal
